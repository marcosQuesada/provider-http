apiVersion: http.crossplane.io/v1alpha1
kind: DisposableRequest
metadata:
  name: foo-check
spec:
  deletionPolicy: Orphan
  references:
    - dependsOn:
        apiVersion: nop.crossplane.io/v1alpha1
        kind: NopResource
        name: foo
        fieldPath: status.response.body
        expectedValue: READY # Optional, if not set requires NON empty value
  forProvider:
    # The 'expectedResponse' field is optional. If used, also set 'rollbackRetriesLimit', which determines the number of HTTP requests to be sent until the jq query returns true.    
    # expectedResponse: '.Body.job_status == "success"'
    insecureSkipTLSVerify: true
    waitTimeout: 5m
    rollbackRetriesLimit: 5
    url:  http://172.17.0.1:8081/api/v1/pets
    method: POST
    body: |
      {
        "color": "simple-color",
        "id": 1111,
        "name": "fake-simple-name",
        "price": 123213,
        "state": "bar-state"
      }
    headers:
      Content-Type:
      - "application/json"
  providerConfigRef:
    name: http-conf
